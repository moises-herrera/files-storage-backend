import{c as U,pa as h}from"./chunk-TOJFIFPL.js";import{E as p,T as s,W as n,aa as i,n as o,s as a,va as l}from"./chunk-FYW5SQEH.js";var c=class t{configService=i(h);baseUrl=this.configService.apiUrl;http=i(U);user=l({});constructor(){let e=localStorage.getItem("user");e&&this.user.set(JSON.parse(e))}setUserData(e){this.user.set(e),localStorage.setItem("user",JSON.stringify(e))}clearUserData(){this.user.set({}),localStorage.removeItem("user")}registerUser(e){return this.http.post(`${this.baseUrl}/users/register`,e).pipe(s(({user:r})=>{this.setUserData(r)}))}loginUser(e){return this.http.post(`${this.baseUrl}/users/login`,e).pipe(s(({user:r})=>{this.setUserData(r)}))}updateUserProfile(e){return this.http.patch(`${this.baseUrl}/users/profile`,e).pipe(s(r=>{this.setUserData(r)}))}refreshToken(){return this.http.get(`${this.baseUrl}/users/refresh-token`).pipe(a(({user:e})=>(this.setUserData(e),!0)),p(()=>(this.clearUserData(),o(!1))))}logout(){return this.http.get(`${this.baseUrl}/users/logout`).pipe(s(()=>{this.clearUserData(),this.user.set({})}))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"})};export{c as a};
