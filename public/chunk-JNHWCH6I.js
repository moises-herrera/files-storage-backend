import{c as u,pa as g}from"./chunk-XZXG4RTI.js";import{$ as l,D as p,S as s,V as n,n as i,r as a,ua as U}from"./chunk-CLJZXXJK.js";var t=g.baseApiUrl,h=class o{http=l(u);user=U({});constructor(){let e=localStorage.getItem("user");e&&this.user.set(JSON.parse(e))}setUserData(e){this.user.set(e),localStorage.setItem("user",JSON.stringify(e))}clearUserData(){this.user.set({}),localStorage.removeItem("user")}registerUser(e){return this.http.post(`${t}/users/register`,e).pipe(s(({user:r})=>{this.setUserData(r)}))}loginUser(e){return this.http.post(`${t}/users/login`,e).pipe(s(({user:r})=>{this.setUserData(r)}))}updateUserProfile(e){return this.http.patch(`${t}/users/profile`,e).pipe(s(r=>{this.setUserData(r)}))}refreshToken(){return this.http.get(`${t}/users/refresh-token`).pipe(a(({user:e})=>(this.setUserData(e),!0)),p(()=>(this.clearUserData(),i(!1))))}logout(){return this.http.get(`${t}/users/logout`).pipe(s(()=>{this.clearUserData(),this.user.set({})}))}static \u0275fac=function(r){return new(r||o)};static \u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})};export{h as a};
